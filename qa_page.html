<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ™ºèƒ½é—®ç­” - å¤šå½©é»„å°è¥¿</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #409EFF; /* Light Blue */
            --bg-color: #F7F8FA;
            --text-main: #333333;
            --text-sub: #666666;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .custom-header {
            position: sticky;
            top: 0;
            height: 44px;
            padding-top: env(safe-area-inset-top);
            display: flex;
            align-items: center;
            padding-left: 15px;
            padding-right: 15px;
            background: #fff;
            z-index: 100;
        }

        .back-btn {
            font-size: 20px;
            color: #333;
            text-decoration: none;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
        }

        .header-title {
            flex: 1;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            margin-right: 40px; /* Balance back button */
        }

        /* Top Info Section */
        .top-info-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px 20px;
            background: #fff;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .logo-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
            border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .hint-text {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 5px;
        }

        .sub-hint {
            font-size: 12px;
            color: var(--text-sub);
        }

        /* Content Section */
        .content-section {
            flex: 1;
            padding: 0 15px 100px; /* Added bottom padding for input bar */
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        /* Chat Styles */
        .chat-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
        }

        .message-row {
            display: flex;
            width: 100%;
            margin-bottom: 10px;
        }

        .message-row.user {
            justify-content: flex-end;
        }

        .message-row.agent {
            justify-content: flex-start;
        }

        .bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.5;
            position: relative;
        }

        .bubble.user {
            background-color: var(--primary-color);
            color: #fff;
            border-bottom-right-radius: 4px;
        }

        .bubble.agent {
            background-color: #fff;
            color: var(--text-main);
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            max-width: 90%; /* Increase width for complex content */
        }

        /* Structured Answer Styles */
        .answer-content {
            font-size: 14px;
        }

        .answer-title {
            font-size: 16px;
            font-weight: 700;
            margin: 10px 0;
            color: #333;
        }

        .divider {
            border: 0;
            border-top: 1px solid #eee;
            margin: 15px 0;
        }

        .day-plan {
            margin-bottom: 20px;
        }

        .day-title {
            font-size: 15px;
            color: var(--primary-color);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .meta-info {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            background: #f9f9f9;
            padding: 5px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .section-label {
            font-weight: 600;
            margin: 10px 0 5px;
            color: #444;
        }

        ul {
            padding-left: 20px;
            margin: 5px 0;
        }

        li {
            margin-bottom: 5px;
        }

        /* Cost Table */
        .cost-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 13px;
        }

        .cost-table th, .cost-table td {
            border: 1px solid #eee;
            padding: 8px;
            text-align: left;
        }

        .cost-table th {
            background-color: #f8f8f8;
            font-weight: 600;
        }

        .total-row {
            background-color: #ecf5ff;
            color: var(--primary-color);
        }

        .tips-section {
            background: #ecf5ff;
            padding: 10px;
            border-radius: 8px;
            font-size: 13px;
        }

        /* Bottom Chat Input (Copied from index.html) */
        .chat-input-area {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10px 20px 30px; /* Extra padding for bottom safe area */
            background: #fff;
            z-index: 99;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.03);
        }

        .chat-input-box {
            display: flex;
            align-items: center;
            background: #F0F2F5;
            border-radius: 24px;
            padding: 8px 12px;
            gap: 10px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .voice-btn, .chat-send-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            outline: none;
            font-size: 14px;
            color: #333;
            padding: 0 5px;
        }

        .chat-send-btn {
            background: var(--primary-color);
            color: #fff;
        }

    </style>
</head>
<body>

    <!-- Header -->
    <div class="custom-header">
        <a href="index.html" class="back-btn">
            <i class="fas fa-chevron-left"></i>
        </a>
        <div class="header-title">æ—…æ¸¸è§„åˆ’å°åŠ©æ‰‹</div>
    </div>

    <!-- Top Info -->
    <div class="top-info-section">
        <img src="honyifu.png" alt="Huang Xiaoxi" class="logo-img">
        <div class="hint-text">å¤šå½©é»„å°è¥¿ä¸ºæ‚¨è§„åˆ’</div>
        <div class="sub-hint">æ ¹æ®æ‚¨çš„éœ€æ±‚ç”Ÿæˆçš„æ—…è¡Œå»ºè®®</div>
    </div>

    <!-- Main Image Content -->
    <div class="content-section">
        <div class="chat-container" id="chatContainer">
            <!-- Messages will be injected here via JS -->
        </div>
    </div>

    <!-- Bottom Input Area -->
    <div class="chat-input-area">
        <div class="chat-input-box">
            <div class="voice-btn">
                <i class="fas fa-microphone"></i>
            </div>
            <input type="text" class="chat-input" placeholder="ç»§ç»­æé—®..." id="chatInput" onkeypress="handleEnter(event)">
            <div class="chat-send-btn" onclick="sendNewMessage()">
                <i class="fas fa-paper-plane"></i>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const question = params.get('q');
            const chatContainer = document.getElementById('chatContainer');

            if (question) {
                // 1. Add User Question (Right)
                const userRow = document.createElement('div');
                userRow.className = 'message-row user';
                userRow.innerHTML = `<div class="bubble user">${escapeHtml(question)}</div>`;
                chatContainer.appendChild(userRow);

                // 2. Add Agent Answer (Left) with Delay
                setTimeout(() => {
                    const agentRow = document.createElement('div');
                    agentRow.className = 'message-row agent';
                    
                    // Structured HTML Answer
                    const answerHTML = `
                        <div class="bubble agent">
                            <div class="answer-content">
                                <h3 class="answer-title">ğŸŒ„ è´µå·3æ—¥æ¸¸ç²¾åè¡Œç¨‹è§„åˆ’</h3>
                                <hr class="divider">
                                
                                <div class="day-plan">
                                    <h4 class="day-title">ç¬¬1å¤©ï¼šè´µé˜³â†’é»”ä¸œå—è‹—æ—ä¾—æ—è‡ªæ²»å·Â·è¥¿æ±Ÿåƒæˆ·è‹—å¯¨</h4>
                                    <p class="meta-info">ğŸš— äº¤é€šï¼šè‡ªé©¾ï¼ˆ2.5å°æ—¶ï¼‰</p>
                                    <ul class="timeline-list">
                                        <li><strong>13:00-15:30</strong> ä»è´µé˜³å‡ºå‘ï¼Œæ²¿é€”æ¬£èµå–€æ–¯ç‰¹å±±åœ°é£å…‰ï¼ŒæŠµè¾¾å…¨çƒæœ€å¤§è‹—æ—èšå±…åœ°â€”â€”<strong>è¥¿æ±Ÿåƒæˆ·è‹—å¯¨</strong>ã€‚</li>
                                    </ul>
                                    <p class="section-label">ğŸï¸ æ¸¸ç©äº®ç‚¹ï¼š</p>
                                    <ul class="highlight-list">
                                        <li><strong>15:30-20:30</strong> æ²‰æµ¸å¼ä½“éªŒè‹—æ—æ–‡åŒ–ï¼
                                            <ul>
                                                <li><strong>åŠè„šæ¥¼ç¾¤</strong>ï¼šå±‚å±‚å å çš„æœ¨è´¨å»ºç­‘åœ¨å¤•é˜³ä¸‹é‡‘å…‰é—ªé—ªï¼Œå®›å¦‚â€œåƒä¸åƒå¯»â€ç°å®ç‰ˆã€‚</li>
                                                <li><strong>é£é›¨æ¡¥æ¼«æ­¥</strong>ï¼šæ‰“å¡ç½‘çº¢æ‹ç…§ç‚¹ï¼Œæ„Ÿå—è‹—å¯¨æµæ°´äººå®¶çš„è¯—æ„ã€‚</li>
                                                <li><strong>å¤œé—´ä¸‡å®¶ç¯ç«</strong>ï¼šç™»è§‚æ™¯å°ä¿¯ç°è‹—å¯¨å¤œæ™¯ï¼Œç¹æ˜Ÿä¸ç¯å…‰äº¤ç›¸è¾‰æ˜ ï¼ˆå»ºè®®æ¸¸ç©5å°æ—¶ï¼‰ã€‚</li>
                                            </ul>
                                        </li>
                                    </ul>
                                    <p class="section-label">ğŸœ ç¾é£Ÿæ¨èï¼š</p>
                                    <ul class="food-list">
                                        <li><strong>è‹—å®¶ç³ç²‘è‚‰</strong>ï¼šç³¯å½å½çš„ç³ç²‘åŒ…è£¹å’¸é¦™è‚‰é¦…ï¼Œè‹—æ—ç‰¹è‰²å°åƒå¿…å°ï¼</li>
                                        <li><strong>è‹—ç‹é±¼</strong>ï¼šé…¸è¾£é²œé¦™çš„é»”èœä»£è¡¨ï¼Œé±¼è‚‰å«©æ»‘ï¼Œæ±¤æ±æ‹Œé¥­ç»é…ï¼</li>
                                    </ul>
                                    <p class="section-label">ğŸ¨ é…’åº—æ¨èï¼š</p>
                                    <ul class="hotel-list">
                                        <li><strong>äº‘éšä»™å±…Â·é™Œé‡é«˜ç©ºå…¨æ™¯ç¾å®¿(å››å·é£é›¨æ¡¥åšç‰©é¦†åº—)</strong>ï¼šå…¨æ™¯è½åœ°çª—ç›´é¢è‹—å¯¨ï¼Œå¤œæ™šæ•ç€æ˜Ÿå…‰å…¥çœ âœ¨</li>
                                    </ul>
                                </div>

                                <div class="day-plan">
                                    <h4 class="day-title">ç¬¬2å¤©ï¼šé»”ä¸œå—â†’è´µé˜³Â·çº¢è‰²è‰ºæœ¯ä¸å¤é•‡ä¹‹æ—…</h4>
                                    <p class="section-label">ğŸŒ… ä¸Šåˆï¼šçº¢é£˜å¸¦è‰ºæœ¯é¦†ï¼ˆ2å°æ—¶ï¼‰</p>
                                    <ul class="timeline-list">
                                        <li><strong>08:30-10:30</strong> è‡ªé©¾å‰å¾€è´µé˜³ï¼Œæ¢ç§˜<strong>çº¢é£˜å¸¦è‰ºæœ¯é¦†</strong>ï¼ˆé•¿å¾ä¸»é¢˜æ²‰æµ¸å¼å±•è§ˆï¼Œå…‰å½±ç§‘æŠ€éœ‡æ’¼äººå¿ƒï¼‰ã€‚</li>
                                    </ul>
                                    <p class="section-label">ğŸ¯ ä¸‹åˆï¼šé’å²©å¤é•‡+é»”çµå±±å…¬å›­</p>
                                    <ul class="timeline-list">
                                        <li><strong>12:30-15:00</strong> <strong>é’å²©å¤é•‡</strong>ï¼š600å¹´å†›äº‹å¤é•‡ï¼çˆ¬åŸå¢™ã€å°ç«ç‘°ç³–ï¼Œæ‰“å¡ã€Šå¯»æªã€‹å–æ™¯åœ°ï¼ˆæ¸¸ç©2å°æ—¶ï¼‰ã€‚</li>
                                        <li><strong>15:30-17:30</strong> <strong>é»”çµå±±å…¬å›­</strong>ï¼šä¸é‡ç”ŸçŒ•çŒ´äº’åŠ¨ğŸ’ï¼Œç™»ç°ç­‘äº­ä¿¯ç°è´µé˜³å…¨æ™¯ï¼ˆæ¸¸ç©2å°æ—¶ï¼‰ã€‚</li>
                                    </ul>
                                    <p class="section-label">ğŸ— ç¾é£Ÿæ¨èï¼š</p>
                                    <ul class="food-list">
                                        <li><strong>é¦™é…¥é¸­</strong>ï¼šéº»åˆ°å˜´å”‡è·³èˆçš„è´µé˜³åå°åƒï¼Œé…¥è„†çˆ†é¦™ï¼</li>
                                        <li><strong>è±†ç±³ç«é”…</strong>ï¼šè±†æ±¤æµ“ç¨ ï¼Œæ¶®é‡èœå’Œäº”èŠ±è‚‰ï¼Œéº»è¾£é²œé¦™è¶…ä¸‹é¥­ï¼</li>
                                    </ul>
                                    <p class="section-label">ğŸ¨ é…’åº—æ¨èï¼š</p>
                                    <ul class="hotel-list">
                                        <li><strong>é›…æ–¯ç‰¹å›½é™…é…’åº—(è´µé˜³å–·æ°´æ± åœ°é“ç«™é»”çµå±±å…¬å›­åº—)</strong>ï¼šäº¤é€šä¾¿åˆ©ï¼Œæ­¥è¡Œå¯è¾¾å¤œå¸‚ï¼Œæˆ¿é—´å®½æ•èˆ’é€‚ğŸ›‹ï¸</li>
                                    </ul>
                                </div>

                                <div class="day-plan">
                                    <h4 class="day-title">ç¬¬3å¤©ï¼šè´µé˜³â†’é»„æœæ ‘ç€‘å¸ƒâ†’è¿”ç¨‹</h4>
                                    <p class="section-label">ğŸ’¦ å…¨å¤©ï¼šé»„æœæ ‘ç€‘å¸ƒï¼ˆ5å°æ—¶ï¼‰</p>
                                    <ul class="timeline-list">
                                        <li><strong>08:30-10:00</strong> è‡ªé©¾å‰å¾€äºšæ´²ç¬¬ä¸€å¤§ç€‘å¸ƒï¼
                                            <ul>
                                                <li><strong>æ°´å¸˜æ´ç©¿è¶Š</strong>ï¼šè¿‘è·ç¦»æ„Ÿå—ç€‘å¸ƒè½°é¸£ï¼Œæ°´é›¾æ‰‘é¢çš„æ¸…å‡‰ï¼ˆè®°å¾—å¸¦é›¨è¡£ğŸŒ§ï¸ï¼‰ã€‚</li>
                                                <li><strong>é™¡å¡å¡˜ç€‘å¸ƒ</strong>ï¼š86ç‰ˆã€Šè¥¿æ¸¸è®°ã€‹å–æ™¯åœ°ï¼Œå½©è™¹å¸¸æŒ‚ç€‘å‰ğŸŒˆã€‚</li>
                                            </ul>
                                        </li>
                                        <li><strong>15:00-16:30</strong> è¿”å›è´µé˜³ï¼Œç»“æŸè¡Œç¨‹ã€‚</li>
                                    </ul>
                                    <p class="section-label">ğŸ² åˆé¤å»ºè®®ï¼š</p>
                                    <p class="simple-text">æ™¯åŒºå†…å“å°å¸ƒä¾æ—é…¸æ±¤é±¼ï¼Œé…¸è¾£å¼€èƒƒï¼</p>
                                </div>

                                <hr class="divider">

                                <h3 class="answer-title">ğŸ’° è´¹ç”¨æ€»è§ˆï¼ˆ1äººï¼‰</h3>
                                <table class="cost-table">
                                    <thead>
                                        <tr>
                                            <th>é¡¹ç›®</th>
                                            <th>é¢„è®¡è´¹ç”¨ï¼ˆå…ƒï¼‰</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>è½¦è´¹ï¼ˆæ²¹è´¹ï¼‰</td><td>515</td></tr>
                                        <tr><td>ä½å®¿ï¼ˆ2æ™šï¼‰</td><td>525</td></tr>
                                        <tr><td>é—¨ç¥¨</td><td>260</td></tr>
                                        <tr><td>é¤é¥®ï¼ˆ3å¤©ï¼‰</td><td>300</td></tr>
                                        <tr class="total-row"><td><strong>åˆè®¡</strong></td><td><strong>1600</strong></td></tr>
                                    </tbody>
                                </table>

                                <hr class="divider">

                                <div class="tips-section">
                                    <p class="section-label">ğŸŒŸ å°è´´å£«ï¼š</p>
                                    <ul class="tips-list">
                                        <li>è‹—å¯¨å»ºè®®ç§Ÿè‹—æ—æœé¥°æ‹ç…§ï¼ˆçº¦50å…ƒ/å°æ—¶ï¼‰ï¼Œé»„æœæ ‘ç€‘å¸ƒä¸°æ°´æœŸï¼ˆ5-10æœˆï¼‰æ›´å£®è§‚ï¼</li>
                                        <li>è‡ªé©¾çµæ´»æ€§å¼ºï¼Œä½†æ™¯åŒºåœè½¦è´¹å·²å«åœ¨è½¦è´¹ä¸­ï¼Œæ— éœ€é¢å¤–é¢„ç®—ã€‚</li>
                                        <li>è´¹ç”¨æŒ‰ä¸­æ¡£æ¶ˆè´¹è§„åˆ’ï¼Œæ€§ä»·æ¯”è¶…é«˜ï¼</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    agentRow.innerHTML = answerHTML;
                    chatContainer.appendChild(agentRow);
                    
                    // Scroll to bottom
                    window.scrollTo(0, document.body.scrollHeight);
                }, 600);
            }
        });

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                sendNewMessage();
            }
        }

        function sendNewMessage() {
            const input = document.getElementById('chatInput');
            const text = input.value.trim();
            if (!text) return;

            const chatContainer = document.getElementById('chatContainer');

            // Add user message
            const userRow = document.createElement('div');
            userRow.className = 'message-row user';
            userRow.innerHTML = `<div class="bubble user">${escapeHtml(text)}</div>`;
            chatContainer.appendChild(userRow);

            input.value = '';
            window.scrollTo(0, document.body.scrollHeight);

            // Mock auto-reply for subsequent messages
            setTimeout(() => {
                const agentRow = document.createElement('div');
                agentRow.className = 'message-row agent';
                agentRow.innerHTML = `<div class="bubble agent">æ”¶åˆ°æ‚¨çš„åé¦ˆï¼å¦‚éœ€æ›´å¤šè¯¦ç»†è§„åˆ’ï¼Œè¯·ç»§ç»­æé—®ã€‚</div>`;
                chatContainer.appendChild(agentRow);
                window.scrollTo(0, document.body.scrollHeight);
            }, 1000);
        }
    </script>
</body>
</html>